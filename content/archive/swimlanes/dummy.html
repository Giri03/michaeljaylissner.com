<!DOCTYPE html>
<html>
   <head>
      <meta name="Author" content="Michael Lissner">
      <meta name="Description" content="A swimlane diagram of the American Presidents using XSLT, Raphael and Javascript.">
      <title>
         Swimlane diagram of the American Presidents
      </title><script type="text/javascript" src="raphael-min.js"></script><script type="text/javascript">

        window.onload = function() {
            var numRooms = 5;
            var roomNames = [];
            roomNames[0] = "Oval Office";
            roomNames[1] = "Grand Ballroom";
            roomNames[2] = "Rose Garden";
            roomNames[3] = "White House";
            roomNames[4] = "Capitol Building";

            // Layout vars
            var headerHeight = 30;
            var margin = 20; // the margin between rooms

            // Paper vars
            var paperMargin = 60;
            var paperWidth = 960;
            var paperHeight = 2288 + headerHeight + margin*2;

            // Box vars
            var width = 168;
            var radius = 5;
            var colors = [];
            colors[0] = "#72cf73";
            colors[1] = "#729fcf";
            colors[2] = "#CFA272";
            colors[3] = "#cf72cd";
            colors[4] = "#ff85ff";

            // Font vars
            var headerFontSize = 18;

            // **************
            // * Make stuff *
            // **************
            // Creates the canvas
            var paper = Raphael("canvas", paperWidth + paperMargin, paperHeight);

            // Fills the paper object with a nice rectangle with rounded corners.
            paper.rect(0, 0, paperMargin+10, paperHeight, 0)
                .attr({fill:"#333", stroke: "none"}); //this is a gray margin on the left
            paper.rect(paperMargin, 0, paperWidth, paperHeight, 10)
                .attr({fill: "#fff", stroke: "none"}); //this is the main drawing area


            // Page headers
            var init = margin + width/2
            var bump = margin + width
            var i = 0;
            for (i=0; i < numRooms; i++){
                paper.text(paperMargin + init+bump*i, headerHeight/2 + headerFontSize/2, roomNames[i])
                    .attr({'font-size': headerFontSize});
            }



            paper.rect(paperMargin + margin, headerHeight + margin + 0, width, 91 - 3, radius)
                .attr({'fill': colors[0], title: 'From 2004-06-01 to 2004-08-31'});
            paper.text(paperMargin + margin + width/2, headerHeight + margin + 0 + 91/2, "George Washington").attr({title: 'From 2004-06-01 to 2004-08-31'});


            paper.rect(paperMargin + margin, headerHeight + margin + 92, width, 790 - 3, radius)
                .attr({'fill': colors[0], title: 'From 2004-09-01 to 2006-10-31'});
            paper.text(paperMargin + margin + width/2, headerHeight + margin + 92 + 790/2, "Thomas Jefferson").attr({title: 'From 2004-09-01 to 2006-10-31'});


            paper.rect(paperMargin + margin, headerHeight + margin + 883, width, 29 - 3, radius)
                .attr({'fill': colors[0], title: 'From 2006-11-01 to 2006-11-30'});
            paper.text(paperMargin + margin + width/2, headerHeight + margin + 883 + 29/2, "Benjamin Franklin").attr({title: 'From 2006-11-01 to 2006-11-30'});


            paper.rect(paperMargin + margin, headerHeight + margin + 913, width, 547 - 3, radius)
                .attr({'fill': colors[0], title: 'From 2006-12-01 to 2008-05-31'});
            paper.text(paperMargin + margin + width/2, headerHeight + margin + 913 + 547/2, "John Adams").attr({title: 'From 2006-12-01 to 2008-05-31'});


            paper.rect(paperMargin + margin, headerHeight + margin + 1461, width, 794 - 3, radius)
                .attr({'fill': colors[0], title: 'From 2008-06-01 to 2010-08-04'});
            paper.text(paperMargin + margin + width/2, headerHeight + margin + 1461 + 794/2, "Benjamin Franklin").attr({title: 'From 2008-06-01 to 2010-08-04'});

            paper.rect(paperMargin + margin*2 + width*1, headerHeight + margin + 0, width, 547 - 3, radius)
                .attr({'fill': colors[1], title: 'From 2004-06-01 to 2005-11-30'});
            paper.text(paperMargin + margin*2 + width*1 + width/2, headerHeight + margin + 0 + 547/2, "James Madison").attr({title: 'From 2004-06-01 to 2005-11-30'});

            paper.rect(paperMargin + margin*2 + width*1, headerHeight + margin + 548, width, 150 - 3, radius)
                .attr({'fill': colors[1], title: 'From 2005-12-01 to 2006-04-30'});
            paper.text(paperMargin + margin*2 + width*1 + width/2, headerHeight + margin + 548 + 150/2, "James Monroe").attr({title: 'From 2005-12-01 to 2006-04-30'});

            paper.rect(paperMargin + margin*2 + width*1, headerHeight + margin + 699, width, 470 - 3, radius)
                .attr({'fill': colors[1], title: 'From 2006-05-01 to 2007-08-14'});
            paper.text(paperMargin + margin*2 + width*1 + width/2, headerHeight + margin + 699 + 470/2, "Andrew Jackson").attr({title: 'From 2006-05-01 to 2007-08-14'});

            paper.rect(paperMargin + margin*2 + width*1, headerHeight + margin + 1170, width, 767 - 3, radius)
                .attr({'fill': colors[1], title: 'From 2007-08-15 to 2009-09-20'});
            paper.text(paperMargin + margin*2 + width*1 + width/2, headerHeight + margin + 1170 + 767/2, "Martin Van Buren").attr({title: 'From 2007-08-15 to 2009-09-20'});

            paper.rect(paperMargin + margin*2 + width*1, headerHeight + margin + 1938, width, 317 - 3, radius)
                .attr({'fill': colors[1], title: 'From 2009-09-21 to 2010-08-04'});
            paper.text(paperMargin + margin*2 + width*1 + width/2, headerHeight + margin + 1938 + 317/2, "William Henry Harrison").attr({title: 'From 2009-09-21 to 2010-08-04'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 0, width, 91 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2004-06-01 to 2004-08-31'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 0 + 91/2, "John Tyler").attr({title: 'From 2004-06-01 to 2004-08-31'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 92, width, 29 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2004-09-01 to 2004-09-30'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 92 + 29/2, "James K. Polk").attr({title: 'From 2004-09-01 to 2004-09-30'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 122, width, 211 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2004-10-01 to 2005-04-30'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 122 + 211/2, "Zachary Taylor").attr({title: 'From 2004-10-01 to 2005-04-30'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 334, width, 122 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2005-05-01 to 2005-08-31'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 334 + 122/2, "Millard Fillmore").attr({title: 'From 2005-05-01 to 2005-08-31'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 467, width, 702 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2005-09-11 to 2007-08-14'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 467 + 702/2, "James Buchanan").attr({title: 'From 2005-09-11 to 2007-08-14'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 1170, width, 152 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2007-08-15 to 2008-01-14'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 1170 + 152/2, "Abraham Lincoln").attr({title: 'From 2007-08-15 to 2008-01-14'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 1340, width, 120 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2008-02-01 to 2008-05-31'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 1340 + 120/2, "Andrew Johnson").attr({title: 'From 2008-02-01 to 2008-05-31'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 1461, width, 152 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2008-06-01 to 2008-10-31'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 1461 + 152/2, "Ulysses S. Grant").attr({title: 'From 2008-06-01 to 2008-10-31'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 1614, width, 211 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2008-11-01 to 2009-05-31'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 1614 + 211/2, "James Garfield").attr({title: 'From 2008-11-01 to 2009-05-31'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 1826, width, 13 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2009-06-01 to 2009-06-14'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 1826 + 13/2, "Chester Aurthur").attr({title: 'From 2009-06-01 to 2009-06-14'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 1840, width, 380 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2009-06-15 to 2010-06-30'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 1840 + 380/2, "Grover Cleveland").attr({title: 'From 2009-06-15 to 2010-06-30'});

            paper.rect(paperMargin + margin*3 + width*2, headerHeight + margin + 2221, width, 34 - 3, radius)
                .attr({'fill': colors[2], title: 'From 2010-07-01 to 2010-08-04'});
            paper.text(paperMargin + margin*3 + width*2 + width/2, headerHeight + margin + 2221 + 34/2, "Benjamin Harrison").attr({title: 'From 2010-07-01 to 2010-08-04'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 0, width, 333 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2004-06-01 to 2005-04-30'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 0 + 333/2, "Grover Cleveland").attr({title: 'From 2004-06-01 to 2005-04-30'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 334, width, 303 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2005-05-01 to 2006-02-28'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 334 + 303/2, "William McKinley").attr({title: 'From 2005-05-01 to 2006-02-28'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 638, width, 60 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2006-03-01 to 2006-04-30'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 638 + 60/2, "Theodore Roosevelt").attr({title: 'From 2006-03-01 to 2006-04-30'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 699, width, 395 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2006-05-01 to 2007-05-31'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 699 + 395/2, "William Taft").attr({title: 'From 2006-05-01 to 2007-05-31'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 1095, width, 91 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2007-06-01 to 2007-08-31'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 1095 + 91/2, "Woodrow Wilson").attr({title: 'From 2007-06-01 to 2007-08-31'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 1187, width, 273 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2007-09-01 to 2008-05-31'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 1187 + 273/2, "Warren Harding").attr({title: 'From 2007-09-01 to 2008-05-31'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 1461, width, 364 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2008-06-01 to 2009-05-31'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 1461 + 364/2, "Calvin Collidge").attr({title: 'From 2008-06-01 to 2009-05-31'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 1831, width, 9 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2009-06-06 to 2009-06-15'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 1831 + 9/2, "Herbert Hoover").attr({title: 'From 2009-06-06 to 2009-06-15'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 1841, width, 14 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2009-06-16 to 2009-06-30'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 1841 + 14/2, "Franklin Roosevelt").attr({title: 'From 2009-06-16 to 2009-06-30'});

            paper.rect(paperMargin + margin*4 + width*3, headerHeight + margin + 1856, width, 399 - 3, radius)
                .attr({'fill': colors[3], title: 'From 2009-07-01 to 2010-08-04'});
            paper.text(paperMargin + margin*4 + width*3 + width/2, headerHeight + margin + 1856 + 399/2, "Harry Truman").attr({title: 'From 2009-07-01 to 2010-08-04'});

            paper.rect(paperMargin + margin*5 + width*4, headerHeight + margin + 395, width, 136 - 3, radius)
                .attr({'fill': colors[4], title: 'From 2005-07-01 to 2005-11-14'});
            paper.text(paperMargin + margin*5 + width*4 + width/2, headerHeight + margin + 395 + 136/2, "Dwight Eisenhower").attr({title: 'From 2005-07-01 to 2005-11-14'});

            paper.rect(paperMargin + margin*5 + width*4, headerHeight + margin + 1920, width, 89 - 3, radius)
                .attr({'fill': colors[4], title: 'From 2009-09-03 to 2009-12-01'});
            paper.text(paperMargin + margin*5 + width*4 + width/2, headerHeight + margin + 1920 + 89/2, "John F. Kennedy").attr({title: 'From 2009-09-03 to 2009-12-01'});



            // Timelines are done in JS exclusively b/c they're very complicado.
            function daysInMonth(month, year) {
                return new Date(year, month, 0).getDate();
            }

            function pad(number) {
                 return (number < 10 ? '0' : '') + number
            }

            /* This for loop is nuts. Essentially, it has two incrementers.
            The first is i, which represents the vertical location of the
            timeline items. The second is dateIncrementer, which is the date
            that gets printed.

            This loop begins at the top of the screen, then increments by the number
            of days in the current month printed. It ends when the end of the chart
            has gotten to today's date.

            Note that 2592000000 is the number of milliseconds in a week. It's here
            to keep the last date from printing at the bottom of the screen, where
            it's not useful.

            Remember too that daysInMonth uses normal month numbers (e.g. January = 1),
            whereas JS-native date functions use 0-indexed month numbers (e.g. January
            = 0).*/
            var today = new Date();
            var dateIncrementer = new Date(2004, 05, 01); //equals the move-in date
            for (var i = headerHeight + margin;
                 dateIncrementer <= today - 2592000000;
                 i = i + daysInMonth(dateIncrementer.getMonth(), dateIncrementer.getFullYear())){
                    //write the date to the paper object if it's an odd month
                    if (dateIncrementer.getMonth() % 2 != 0) {
                        paper.text(paperMargin-2, i, (pad(dateIncrementer.getMonth()+1) + "/" + dateIncrementer.getFullYear()))
                            .attr({'text-anchor': 'end', 'fill': 'white'});
                    }

                    // increment the date by the number of days in the current month
                    dateIncrementer.setDate(dateIncrementer.getDate() + daysInMonth(dateIncrementer.getMonth() + 1, dateIncrementer.getFullYear()));
            }

        };
                </script><style type="text/css">
                    body {
                        background: #333;
                        color: #fff;
                        text-align: center;
                        font: 300 100.1% "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif;
                    }
                    #canvas {
                        height: 2348px;
                        width: 1020px;
                        margin: 0 auto;
                        text-align: left;
                    }
                    #copy {
                        font: 300 .7em "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif;
                        position: absolute;
                        right: 1em;
                        text-align: right;
                    }
                    #copy a {
                        color: #fff;
                    }
                </style></head>
   <body>
      <h1>An (Inaccurate) Presidential History</h1>
      <div id="canvas"></div>
      <p id="copy">A long-overdue exploration of <a href="http://www.w3.org/TR/xslt">XSLT</a> and the <a href="http://raphaeljs.com/">Raphaël</a> JavaScript Vector Library
      </p>
   </body>
</html>
