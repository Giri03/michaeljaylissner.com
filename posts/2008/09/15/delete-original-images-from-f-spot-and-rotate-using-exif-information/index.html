<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Michael Lissner" />
        <meta name="copyright" content="Michael Lissner" />

<meta name="keywords" content="script, f-spot, awk, grep, Tech, " />
        <title>Delete Original Images from F-Spot and Rotate Using Exif&nbsp;Information - Michael Jay Lissner
</title>
        <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../../../../../theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../../../../../theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="../../../../../theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="../../../../../theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="../../../../../theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="../../../../../theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="../../../../../theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="../../../../../theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="../../../../../theme/images/apple-touch-icon-144x144.png" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../../../../"><span class=site-name>Michael Jay Lissner</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="../../../../..">Home</a></li>
                            <li ><a href="../../../../../pages/about.html">About this&nbsp;Site</a></li>
                            <li ><a href="../../../../../categories.html">Categories</a></li>
                            <li ><a href="../../../../../tags.html">Tags</a></li>
                            <li ><a href="../../../../../archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="../../../../../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="../../../../../posts/2008/09/15/delete-original-images-from-f-spot-and-rotate-using-exif-information/"> Delete Original Images from F-Spot and Rotate Using Exif&nbsp;Information  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            <p>Over the past couple weeks, my girlfriend and I spent a lot of time working on the photos from our Peru trip. Since we used F-Spot to do our photo editing, when we were done we had a couple of problems when it came to transferring the photos back to her computer which is running&nbsp;Vista. </p>
<p>The first problem was that when we rotated images with F-Spot, it simply changed the exif information for the photo, and didn&#8217;t change the pixels of the photo themselves. This was fine when viewed in F-Spot because it is aware of exif information, and displays the photos correctly. However, when we transferred the files to her computer, we discovered that Vista does not take exif information into account on the <span class="caps">OS</span> level, nor does Picassa. As a result, we needed to somehow rotate the images that had exif information indicating a non-normal&nbsp;rotation.</p>
<p>The second problem we encountered is that in F-Spot when you edit a photo, it creates a second file with the edited photo, and leaves the original unchanged. So, if you edit file dsc00343.jpg, you get a second photo called dsc00343 (Modified).jpg. This is <span class="caps">OK</span> when in F-Spot, however, when we went to her computer, it was very hard for her to have <span class="caps">ONLY</span> the modified version of those photos, and to delete the originals (since the edited versions are better than the&nbsp;originals).</p>
<p>To solve the first problem, I used a couple of tricks. The first thing I did was to make a copy of the photos in case all went&nbsp;south.</p>
<div class="highlight"><pre>mkdir backupPhotos
cp *.jpg *.jpeg backupPhotos
<span class="nb">cd </span>backupPhotos
</pre></div>


<p>Once that is done, we can begin rotating images. For this, we will need the jhead&nbsp;program.</p>
<div class="highlight"><pre>sudo aptitude install jhead
</pre></div>


<p>Once that&#8217;s installed, we&nbsp;rotate:</p>
<div class="highlight"><pre>jhead -autorot  *.jpg *.jpeg
</pre></div>


<p>This will rotate all of the files that have unusual information in the exif orientation&nbsp;field. </p>
<p>Problem number one&nbsp;solved.</p>
<p>For problem two, we will need to isolate all of the photos that have been modified, and delete the originals. To do this, we will capitalize on the fact that the renamed images use the original pictures name in their&nbsp;name. </p>
<p>To begin with, we create a list of the photos that have been&nbsp;modified:</p>
<div class="highlight"><pre>ls *.jpg *.jpeg | grep -i modified &gt; modifiedImages.txt
</pre></div>


<p>Using awk, we can separate out the original name of the photos. The following 
commands will convert the &#8216;)&#8217; to &#8216;(&#8216; and will use the two &#8216;(&#8216; as a delimiters, 
returning the name of the file as the first field, and the .jpg or .jpeg as 
the third field. After that, it will remove any spaces from the file name, and 
will create a new file with a list of the modified pictures. It sounds 
complicated, but the final result should&nbsp;work:</p>
<div class="highlight"><pre>tr <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;(&#39;</span> &amp;lt; modifiedImages.txt &gt; modifiedImages2.txt
cat modifiedImages2.txt | awk -F<span class="s1">&#39;(&#39;</span> <span class="s1">&#39;{print $1,$3;}&#39;</span> | sed <span class="s1">&#39;s/  //g&#39;</span> &amp;gt; modifiedImages3.txt
</pre></div>


<p>You should now have a file called modifiedImages3.txt that contains the name of all of the original photos. To delete the pictures in this list from the collection - permanently -&nbsp;run:</p>
<div class="highlight"><pre>rm <span class="sb">`</span>cat modifiedImages3.txt<span class="sb">`</span>
</pre></div>


<p>You should now be able to transfer this entire directory of photos to another computer without rotation issues or duplicated&nbsp;photos.</p>
            <aside>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="../../../../../posts/2008/09/15/on-drm-and-the-darknet/" title="Previous: On <span class="caps">DRM</span> and the&nbsp;Darknet">On <span class="caps">DRM</span> and the&nbsp;Darknet</a></li>
 
                <li class="next_article"><a href="../../../../../posts/2008/09/17/there-is-a-lesson-about-yahoo-security-i-learned-from-palin-today/" title="Next: There&#8217;s a Lesson About Yahoo! Security I Learned from Palin&nbsp;Today">There&#8217;s a Lesson About Yahoo! Security I Learned from Palin&nbsp;Today</a> »</li>
            </ul>
            </nav>
            </aside>
<section>
<hr/>
<p id="comment-message">I love getting feedback and comments. Make my day by making a comment. </p>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle disqus-comment-count" data-toggle="collapse" data-parent="#accordion2" 
                href="../../../../../posts/2008/09/15/delete-original-images-from-f-spot-and-rotate-using-exif-information//#disqus_thread">
                Comments
            </a>
        </div>
        <div id="disqus_thread" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="comments">
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'michaeljaylissner';
        var disqus_identifier = '../../../../../posts/2008/09/15/delete-original-images-from-f-spot-and-rotate-using-exif-information/';
    var disqus_url = '../../../../../posts/2008/09/15/delete-original-images-from-f-spot-and-rotate-using-exif-information/';

    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>                </div>
            </div>
        </div>
    </div>
</div>
</section>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2008-09-15T23:33:48">Sep 15, 2008</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#Tech-ref">Tech</a> 
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#awk-ref">awk
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#f-spot-ref">f-spot
                    <span>2</span>
</a></li>
                <li><a href="/tags.html#grep-ref">grep
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#script-ref">script
                    <span>2</span>
</a></li>
            </ul>

        </div>
        </section>
    </div>
    </article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-license">Unless mentioned otherwise, all material on this site is <a href="about#license">licensed</a> under a Creative Commons copyright or the GNU Affero GPL. <a href="about#privacy">Privacy Policy</a>.</li>
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

<script type="text/javascript">
    var disqus_shortname = 'michaeljaylissner';

    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    </body>
</html>